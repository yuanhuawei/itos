function isPc(){for(var e=navigator.userAgent,r=["Android","iPhone","SymbianOS","Windows Phone","iPad","iPod"],o=!0,l=0;l<r.length;l++)if(e.indexOf(r[l])>0){o=!1;break}return o}var controller={};controller.isLoading=!0,controller.lotteryID=utilService.getUrlVar("lotteryID"),controller.wxOpenID=utilService.getUrlVar("wxOpenID"),controller.uniqueID=utilService.getUrlVar("uniqueID"),controller.from=utilService.getUrlVar("from"),controller.openLottery=function(){location.href="bigWheel.html?lotteryID="+controller.lotteryID+"&publishmentSystemID="+service.publishmentSystemID+"&wxOpenID="+controller.wxOpenID},controller.openApplication=function(){location.href="application.html?lotteryID="+controller.lotteryID+"&publishmentSystemID="+service.publishmentSystemID+"&wxOpenID="+controller.wxOpenID+"&lotteryType=bigWheel"},controller.openCheck=function(){location.href="check.html?lotteryID="+controller.lotteryID+"&publishmentSystemID="+service.publishmentSystemID+"&wxOpenID="+controller.wxOpenID+"&lotteryType=bigWheel"},controller.openEnd=function(){location.href="end.html?lotteryID="+controller.lotteryID+"&publishmentSystemID="+service.publishmentSystemID+"&wxOpenID="+controller.wxOpenID},controller.isSuccess=!1,controller.errorMessage="",controller.isPoweredBy=!1,controller.poweredBy="",controller.lotteryInfo={},controller.awardInfoList=[],controller.awardInfo=null,controller.winnerInfo=null,controller.isMax=!1,controller.success=function(){$.layer({area:["auto","auto"],title:"中奖了",dialog:{msg:"恭喜你，中奖了！<br />您抽中了"+controller.awardInfo.awardName+"：<br />"+controller.awardInfo.title,btns:1,type:6,btn:["确定"],yes:function(){controller.openApplication()}}})},controller.failure=function(){layer.msg("未能中奖，谢谢参与！",2,5)},controller.render=function(){utilService.render("controller",controller),$("#lotteryBtn").click(function(){service.submitLottery(controller.lotteryID,controller.wxOpenID,function(e){controller.isSuccess=e.isSuccess,controller.errorMessage=e.errorMessage,controller.awardInfo=e.awardInfo,controller.winnerInfo=e.winnerInfo;var r=e.angle;controller.isSuccess?$("#lotteryPic").rotate({angle:0,duration:1e4,animateTo:2160+r,callback:function(){null!=controller.awardInfo&&null!=controller.winnerInfo?controller.success():controller.failure()}}):layer.msg(controller.errorMessage,2,5)})}),$("#loading").hide(),$("#main").show()},controller.main=function(){""!=controller.from&&controller.openLottery(),controller.uniqueID||(controller.wxOpenID=controller.uniqueID),service.getLotteryParameter(controller.lotteryID,controller.wxOpenID,function(e){if(controller.isLoading=!1,e.isEnd)controller.openEnd();else{if(controller.isSuccess=e.isSuccess,controller.errorMessage=e.errorMessage,controller.isPoweredBy=e.isPoweredBy,controller.poweredBy=e.poweredBy,controller.lotteryInfo=e.lotteryInfo,controller.awardInfoList=e.awardInfoList,controller.awardInfo=e.awardInfo,controller.winnerInfo=e.winnerInfo,null!=controller.winnerInfo&&("Applied"==controller.winnerInfo.status||"Cashed"==controller.winnerInfo.status))return void controller.openCheck();controller.render()}document.title=e.lotteryInfo.title})},controller.main();