var controller={};controller.isLoading=!0,controller.lotteryType=utilService.getUrlVar("lotteryType"),controller.lotteryID=utilService.getUrlVar("lotteryID"),controller.wxOpenID=utilService.getUrlVar("wxOpenID"),controller.openLottery=function(r){location.href=r+".html?lotteryID="+controller.lotteryID+"&publishmentSystemID="+service.publishmentSystemID+"&wxOpenID="+controller.wxOpenID+"&lotteryType="+r},controller.openCheck=function(r){location.href="check.html?lotteryID="+controller.lotteryID+"&publishmentSystemID="+service.publishmentSystemID+"&wxOpenID="+controller.wxOpenID+"&lotteryType="+r},controller.render=function(){utilService.render("controller",controller),$("#loading").hide(),$("#main").show()},controller.isSuccess=!1,controller.errorMessage="",controller.isPoweredBy=!1,controller.poweredBy="",controller.lotteryInfo={},controller.awardInfoList=[],controller.awardInfo=null,controller.winnerInfo=null,controller.submitApplication=function(){var r=$("#realName").val(),o=$("#mobile").val(),e=$("#email").val(),l=$("#address").val();return $("#myForm").validator("validate"),!$("#myForm").children().hasClass("has-error")&&($("#loading").show(),$("#main").hide(),void service.submitApplication(controller.lotteryID,controller.winnerInfo.id,r,o,e,l,function(r){r.isSuccess?controller.openCheck(controller.lotteryType):notifyService.error(r.errorMessage)}))},controller.main=function(){service.getLotteryParameter(controller.lotteryID,controller.wxOpenID,function(r){controller.isSuccess=r.isSuccess,controller.errorMessage=r.errorMessage,controller.isPoweredBy=r.isPoweredBy,controller.poweredBy=r.poweredBy,controller.lotteryInfo=r.lotteryInfo,controller.awardInfoList=r.awardInfoList,controller.awardInfo=r.awardInfo,controller.winnerInfo=r.winnerInfo,controller.awardInfo?controller.lotteryInfo.isFormRealName||controller.lotteryInfo.isFormMobile||controller.lotteryInfo.isFormEmail||controller.lotteryInfo.isFormAddress?controller.render():controller.openCheck(controller.lotteryInfo.lotteryType):controller.openLottery(controller.lotteryInfo.lotteryType),document.title=r.lotteryInfo.title})},controller.main();