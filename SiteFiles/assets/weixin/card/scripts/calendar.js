function getCalendar(){for(var t=0,e="",a=new Date,r=a.getFullYear(),n=a.getMonth(),l=new Array,i=0;i<controller.cardSignLogInfoList.length;i++){var s=controller.cardSignLogInfoList[i];l[getSignDate(s.signDate)]=getSignDate(s.signDate)}for(var i=r;i>=r-1;i--)for(var d=1;d<13;d++){e+='<div class="date_box_item">',e+='<div class="calendar-header">',e+=""+i+"年",e+=""+d+"月",e+="</div>",e+='<table style="width: 100%;">',e+="<thead><tr><th>日</th><th>一</th><th>二</th><th>三</th><th>四</th><th>五</th><th>六</th></tr></thead>",t=getDaysInOneMonth(i,d),e+='<tbody id="tab_'+i+"_"+d+'">';var o=getDay(i+"/"+d+"/1");e+="<tr>";for(var h=0;h<o;h++){preDayCount=getDaysInOneMonth(i,d-1);var g=preDayCount-o+h;e+='<td class="enable">'+g+"</td>"}for(var v=1;v<t;v++)o%7==0&&(e+="</tr><tr>"),e+=l[i+"-"+d+"-"+v]?'<td class="selected">'+v+"</td>":'<td class="enable">'+v+"</td>",o++;e+="</tr>",e+="</tbody>",e+="</table>",e+="</div>"}$("#divDate").html(e);for(var i=r-1;i<r+1;i++)for(var d=1;d<13;d++)for(var c=$("#tab_"+i+"_"+d+" tr:last").children().length,p=1;p<=7-c;p++){var D='<td class="enable next_td">'+p+"</td>";$($("#tab_"+i+"_"+d+" tr:last")).append(D)}$("#curMonth").val(n),window.mySwipe=$("#mySwipe").Swipe().data("Swipe")}function getDaysInOneMonth(t,e){e=parseInt(e,10);var a=new Date(t,e,0);return a.getDate()+1}function getDay(t){var e=new Date(t).getDay();return e}function getSignDate(t){var e=parseInt(t.split("T")[0].split("-")[0]),a=parseInt(t.split("T")[0].split("-")[1]),r=parseInt(t.split("T")[0].split("-")[2]);return date=e+"-"+a+"-"+r}