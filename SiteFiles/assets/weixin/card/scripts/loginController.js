var controller={};controller.login={},controller.userName="",controller.poweredBy="",controller.isLoading=!0,controller.isSuccess=!1,controller.isPoweredBy=!1,controller.render=function(){utilService.render("controller",controller),$("#btnLogin").click(function(){controller.submit()}),$(".forget_box label").click(function(){$(this).hasClass("on")?($(this).removeClass("on"),$(".forget_box input").val("0")):($(this).addClass("on"),$(".forget_box input").val("1"))}),$("#loading").hide(),$("#main").show(),$("#userName").focus()},controller.submit=function(){controller.login.userName=$("#userName").val(),controller.login.password=$("#password").val(),controller.login.isPersistent="0"!=$("#isPersistent").val();var r=!0;return controller.login.userName||controller.login.password?controller.login.userName?controller.login.password||(notifyService.error("请输入登录密码！"),$("#password").focus(),r=!1):(notifyService.error("请输入登录账号！"),$("#userName").focus(),r=!1):(notifyService.error("请输入登录账号及密码！"),$("#userName").focus(),r=!1),!!r&&void service.login(service.cardID,controller.login.userName,controller.login.password,controller.login.isPersistent,function(r){controller.isSuccess=r.isSuccess,controller.isSuccess?service.openMyCard():(controller.render(),notifyService.error(r.errorMessage))})},controller.main=function(){service.getCardParameter(service.cardID,function(r){controller.isLoading=!1,r.isSuccess?(controller.isPoweredBy=r.isPoweredBy,controller.poweredBy=r.poweredBy,controller.render()):notifyService.error(r.errorMessage),document.title=r.cardInfo.title})},controller.main();