var controller={};controller.isLoading=!0,controller.searchID=utilService.getUrlVar("searchID"),controller.keywords=utilService.getUrlVar("keywords"),controller.isPoweredBy=!1,controller.poweredBy="",controller.searchInfo={},controller.searchNavigationInfoList=[],controller.contentInfoList=[],controller.idCollection="",controller.render=function(){utilService.render("controller",controller),$(".btn-toolbar .btn").click(function(){$("#searchType").val($(this).attr("id")),$(this).addClass("active").siblings().removeClass("active")}),$("#keywords").val(controller.keywords),$("#loading").hide(),$("#main").show()},controller.openSearch=function(){var e=$("#keywords").val();if(!e)return void notifyService.error("请输入搜索关键字");$("#loading").show(),$("#main").hide();var r=$("#searchType").val();"site"==r?location.href="search.html?publishmentSystemID="+service.publishmentSystemID+"&searchID="+controller.searchID+"&keywords="+e:"baidu"==r?location.href="http://www.baidu.com/fro=844b/s?word="+e+"&st=11104i&ts=1706443&sa=is_1&ms=1&SS=10&rq=JA":"sogou"==r&&(location.href="http://weixin.sogou.com/weixinwap?ie=utf8&query="+e+"&type=1")},controller.more=function(){for(var e=0;e<controller.contentInfoList.length;e++)controller.idCollection?controller.idCollection+=","+controller.contentInfoList[e].id:controller.idCollection=""+controller.contentInfoList[e].id;$("#loading").show(),$("#main").hide(),service.getMoreResultParameter(controller.searchID,controller.keywords,controller.idCollection,function(e){if(e.isSuccess){controller.contentInfoList=e.contentInfoList;for(var r=0;r<controller.contentInfoList.length;r++){var o=controller.contentInfoList[r];o.title=o.title.replace(new RegExp(controller.keywords,"g"),'<span class="red">'+controller.keywords+"</span>"),o.summary=o.summary.replace(new RegExp(controller.keywords,"g"),'<span class="red">'+controller.keywords+"</span>")}controller.render()}else notifyService.error(e.errorMessage)})},controller.main=function(){service.getSearchResultParameter(controller.searchID,controller.keywords,function(e){if(controller.isLoading=!1,e.isSuccess){controller.isPoweredBy=e.isPoweredBy,controller.poweredBy=e.poweredBy,controller.searchInfo=e.searchInfo,controller.searchNavigationInfoList=e.searchNavigationInfoList,controller.contentInfoList=e.contentInfoList;for(var r=0;r<controller.contentInfoList.length;r++){var o=controller.contentInfoList[r];o.title=o.title.replace(new RegExp(controller.keywords,"g"),'<span class="red">'+controller.keywords+"</span>"),o.summary=o.summary.replace(new RegExp(controller.keywords,"g"),'<span class="red">'+controller.keywords+"</span>")}controller.render()}else notifyService.error(e.errorMessage);document.title=e.searchInfo.title})},controller.main(),controller.getDate=function(e){return utilService.getDate(e)};