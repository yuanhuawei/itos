var controller={};controller.isLoading=!0,controller.searchID=utilService.getUrlVar("searchID"),controller.isPoweredBy=!1,controller.poweredBy="",controller.searchInfo={},controller.searchNavigationInfoList=[],controller.imageContentInfoList=[],controller.textContentInfoList=[],controller.imageIDCollection="",controller.textIDCollection="",controller.render=function(){utilService.render("controller",controller),$(".btn-toolbar .btn").click(function(){$("#searchType").val($(this).attr("id")),$(this).addClass("active").siblings().removeClass("active")}),$("#loading").hide(),$("#main").show()},controller.openSearch=function(){var o=$("#keywords").val();if(!o)return void notifyService.error("请输入搜索关键字");$("#loading").show(),$("#main").hide();var e=$("#searchType").val();"site"==e?location.href="search.html?publishmentSystemID="+service.publishmentSystemID+"&searchID="+controller.searchID+"&keywords="+o:"baidu"==e?location.href="http://www.baidu.com/fro=844b/s?word="+o+"&st=11104i&ts=1706443&sa=is_1&ms=1&SS=10&rq=JA":"sogou"==e&&(location.href="http://weixin.sogou.com/weixinwap?ie=utf8&query="+o+"&type=1")},controller.main=function(){service.getSearchParameter(controller.searchID,function(o){controller.isLoading=!1,o.isSuccess?(controller.isPoweredBy=o.isPoweredBy,controller.poweredBy=o.poweredBy,controller.searchInfo=o.searchInfo,controller.searchNavigationInfoList=o.searchNavigationInfoList,controller.imageContentInfoList=o.imageContentInfoList,controller.textContentInfoList=o.textContentInfoList,controller.render()):notifyService.error(o.errorMessage),document.title=o.searchInfo.title})},controller.loadImageContentMore=function(){for(var o=0;o<controller.imageContentInfoList.length;o++)controller.imageIDCollection?controller.imageIDCollection+=","+controller.imageContentInfoList[o].id:controller.imageIDCollection=""+controller.imageContentInfoList[o].id;$("#loading").show(),$("#main").hide(),service.getRefreshParameter(controller.searchID,controller.imageIDCollection,"",function(o){o.isSuccess&&(controller.imageContentInfoList=o.imageContentInfoList,controller.render())})},controller.loadTextContentMore=function(){for(var o=0;o<controller.textContentInfoList.length;o++)controller.textIDCollection?controller.textIDCollection+=","+controller.textContentInfoList[o].id:controller.textIDCollection=""+controller.textContentInfoList[o].id;$("#loading").show(),$("#main").hide(),service.getRefreshParameter(controller.searchID,"",controller.textIDCollection,function(o){o.isSuccess&&(controller.textContentInfoList=o.textContentInfoList,controller.render())})},controller.main();