$.fn.wookmark=function(o){this.wookmarkOptions?o&&(this.wookmarkOptions=$.extend(this.wookmarkOptions,o)):this.wookmarkOptions=$.extend({container:$("body"),offset:2,autoResize:!1,itemWidth:$(this[0]).outerWidth(),resizeDelay:50},o),this.wookmarkColumns||(this.wookmarkColumns=null,this.wookmarkContainerWidth=null),this.wookmarkLayout=function(){var o=this.wookmarkOptions.itemWidth+this.wookmarkOptions.offset,t=this.wookmarkOptions.container.width(),i=Math.floor((t+this.wookmarkOptions.offset)/o),s=Math.round((t-(i*o-this.wookmarkOptions.offset))/2),e=0;e=null!=this.wookmarkColumns&&this.wookmarkColumns.length==i?this.wookmarkLayoutColumns(o,s):this.wookmarkLayoutFull(o,i,s),this.wookmarkOptions.container.css("height",e+"px")},this.wookmarkLayoutFull=function(o,t,i){for(var s=[];s.length<t;)s.push(0);for(this.wookmarkColumns=[];this.wookmarkColumns.length<t;)this.wookmarkColumns.push([]);for(var e,k=0,r=0,h=this.length,a=null,m=null,n=0;k<h;k++){for(e=$(this[k]),a=null,m=0,r=0;r<t;r++)(null==a||s[r]<a)&&(a=s[r],m=r);e.css({position:"absolute",top:a+"px",left:m*o+i+"px"}),s[m]=a+e.outerHeight()+this.wookmarkOptions.offset,n=Math.max(n,s[m]),this.wookmarkColumns[m].push(e)}return n},this.wookmarkLayoutColumns=function(o,t){for(var i=[];i.length<this.wookmarkColumns.length;)i.push(0);for(var s,e,k,r=0,h=this.wookmarkColumns.length,a=0,m=0;r<h;r++)for(s=this.wookmarkColumns[r],e=s.length,a=0;a<e;a++)k=s[a],k.css({left:r*o+t+"px",top:i[r]+"px"}),i[r]+=k.outerHeight()+this.wookmarkOptions.offset,m=Math.max(m,i[r]);return m},this.wookmarkResizeTimer=null,this.wookmarkResizeMethod||(this.wookmarkResizeMethod=null),this.wookmarkOptions.autoResize&&(this.wookmarkOnResize=function(o){this.wookmarkResizeTimer&&clearTimeout(this.wookmarkResizeTimer),this.wookmarkResizeTimer=setTimeout($.proxy(this.wookmarkLayout,this),this.wookmarkOptions.resizeDelay)},this.wookmarkResizeMethod||(this.wookmarkResizeMethod=$.proxy(this.wookmarkOnResize,this)),$(window).resize(this.wookmarkResizeMethod)),this.wookmarkClear=function(){this.wookmarkResizeTimer&&(clearTimeout(this.wookmarkResizeTimer),this.wookmarkResizeTimer=null),this.wookmarkResizeMethod&&$(window).unbind("resize",this.wookmarkResizeMethod)},this.wookmarkLayout(),this.show()};