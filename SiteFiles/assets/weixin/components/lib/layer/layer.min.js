!function(e,t){"use strict";var o,i,s,a,r=!0,n="lily/lib/layer/",l={hosts:function(){var e=location.href.match(/\:\d+/);return e=e?e[0]:"","http://"+document.domain+e+"/"}(),getPath:function(){var e=document.scripts||o("script"),t=e[e.length-1].src;return r?t.substring(0,t.lastIndexOf("/")+1):this.hosts+n}};e.layer={v:"1.7.1",ie6:!-[1]&&!e.XMLHttpRequest,index:0,path:l.getPath(),use:function(e,t){var i,s,a,r=o("head")[0];e=e.replace(/\s/g,""),i=/\.css$/.test(e),s=document.createElement(i?"link":"script"),a=e.replace(/\.|\//g,""),i&&(s.setAttribute("type","text/css"),s.setAttribute("rel","stylesheet")),s.setAttribute(i?"href":"src",layer.path+e),s.setAttribute("id",a),o("#"+a)[0]||r.appendChild(s),o(s).ready(function(){t&&t()})},ready:function(e){return layer.use("skin/layer.css",e)},alert:function(e,t,i,s){return o.layer({dialog:{msg:e,type:t,yes:s},title:i,area:["auto","auto"]})},confirm:function(e,t,i,s){return o.layer({dialog:{msg:e,type:4,btns:2,yes:t,no:s},title:i})},msg:function(e,i,s,a){var r,n={title:!1,closeBtn:!1};return(""==e||e==t)&&(e="&nbsp;"),i===t&&(i=2),"number"==typeof s?r=s:(s=s||{},r=s.type,n.success=function(){layer.shift(s.rate)},n.shade=s.shade),n.time=i,n.dialog={msg:e,type:r},n.end="function"==typeof s?s:a,o.layer(n)},load:function(e,t){return"string"==typeof e?this.msg(e,0,16):o.layer({time:e,loading:{type:t},bgcolor:t?"#fff":"",shade:[.1,"#000",!!t],border:[7,.3,"#000",!(3===t||!t)],type:3,title:["",!1],closeBtn:[0,!1]})},tips:function(e,t,i,s,a,r){var n={type:4,shade:!1,success:function(e){this.closeBtn||e.find(".xubox_tips").css({"padding-right":10})},bgcolor:"",tips:{msg:e,follow:t}};return i=i||{},n.time=i.time||i,n.closeBtn=i.closeBtn||!1,n.maxWidth=i.maxWidth||s,n.tips.guide=i.guide||a,n.tips.style=i.style||r,o.layer(n)}},s=function(e){var t=this.config;layer.index++,this.index=layer.index,this.config=o.extend({},t,e),this.config.dialog=o.extend({},t.dialog,e.dialog),this.config.page=o.extend({},t.page,e.page),this.config.iframe=o.extend({},t.iframe,e.iframe),this.config.loading=o.extend({},t.loading,e.loading),this.config.tips=o.extend({},t.tips,e.tips),this.creat()},s.pt=s.prototype,s.pt.config={type:0,shade:[.3,"#000",!0],shadeClose:!1,fix:!0,move:[".xubox_title",!0],moveOut:!1,title:["信息",!0],offset:["200px","50%"],area:["310px","auto"],closeBtn:[0,!0],time:0,bgcolor:"#fff",border:[8,.3,"#000",!0],zIndex:19891014,maxWidth:400,dialog:{btns:1,btn:["确定","取消"],type:3,msg:"",yes:function(e){layer.close(e)},no:function(e){layer.close(e)}},page:{dom:"#xulayer",html:"",url:""},iframe:{src:"http://sentsin.com"},loading:{type:0},tips:{msg:"",follow:"",guide:0,isGuide:!0,style:["background-color:#FF9900; color:#fff;","#FF9900"]},success:function(){},close:function(e){layer.close(e)},end:function(){}},s.pt.type=["dialog","page","iframe","loading","tips"],s.pt.space=function(e){var t,o,i,s,a,r,n,l,c,d,f,p,u,h;return e=e||"",t=this.index,o=this.config,i=o.dialog,s=this.dom,a=-1===i.type?"":'<span class="xubox_msg xulayer_png32 xubox_msgico xubox_msgtype'+i.type+'"></span>',r=['<div class="xubox_dialog">'+a+'<span class="xubox_msg xubox_text" style="'+(a?"":"padding-left:20px")+'">'+i.msg+"</span></div>",'<div class="xubox_page">'+e+"</div>",'<iframe allowtransparency="true" id="'+s.ifr+t+'" name="'+s.ifr+t+'" onload="$(this).removeClass(\'xubox_load\');" class="'+s.ifr+'" frameborder="0" src="'+o.iframe.src+'"></iframe>','<span class="xubox_loading xubox_loading_'+o.loading.type+'"></span>','<div class="xubox_tips" style="'+o.tips.style[0]+'"><div class="xubox_tipsMsg">'+o.tips.msg+'</div><i class="layerTipsG"></i></div>'],n="",l="",c=o.zIndex+t,d="z-index:"+c+"; background-color:"+o.shade[1]+"; opacity:"+o.shade[0]+"; filter:alpha(opacity="+100*o.shade[0]+");",o.shade[2]&&(n='<div times="'+t+'" id="xubox_shade'+t+'" class="xubox_shade" style="'+d+'"></div>'),o.zIndex=c,f="",p="",u="z-index:"+(c-1)+";  background-color: "+o.border[2]+"; opacity:"+o.border[1]+"; filter:alpha(opacity="+100*o.border[1]+"); top:-"+o.border[0]+"px; left:-"+o.border[0]+"px;",o.border[3]&&(l='<div id="xubox_border'+t+'" class="xubox_border" style="'+u+'"></div>'),o.closeBtn[1]&&(p='<a class="xubox_close xulayer_png32 xubox_close'+o.closeBtn[0]+'" href="javascript:;"></a>'),o.title[1]&&(f='<h2 class="xubox_title"><em>'+o.title[0]+"</em></h2>"),h='<div times="'+t+'" showtime="'+o.time+'" style="z-index:'+c+'" id="'+s.lay+t+'" class="'+s.lay+'"><div style="background-color:'+o.bgcolor+"; z-index:"+c+'" class="xubox_main">'+r[o.type]+f+p+'<span class="xubox_botton"></span></div>'+l+"</div>",[n,h]},s.pt.dom={lay:"xubox_layer",ifr:"xubox_iframe"},s.pt.creat=function(){var e,t,s,a,r,n,l=this,c="",d=this.config,f=d.dialog,p=l.config.title,u=l.dom,h=l.index;switch(p.constructor===Array||(l.config.title=[p,!0]),p===!1&&(l.config.title=[p,!1]),e=d.page,t=o("body"),s=function(e){var e=e||"";c=l.space(e),t.append(c[0])},d.type){case 1:if(""!==e.html)s('<div class="xuboxPageHtml">'+e.html+"</div>"),t.append(c[1]);else if(""!==e.url)s('<div class="xuboxPageHtml" id="xuboxPageHtml'+h+'">'+e.html+"</div>"),t.append(c[1]),o.get(e.url,function(t){o("#xuboxPageHtml"+h).html(t.toString()),e.ok&&e.ok(t)});else{if(0!=o(e.dom).parents(".xubox_page").length)return;s(),o(e.dom).show().wrap(c[1])}break;case 2:s(),t.append(c[1]);break;case 3:d.title=["",!1],d.area=["auto","auto"],d.closeBtn=["",!1],o(".xubox_loading")[0]&&layer.close(o(".xubox_loading").parents("."+u.lay).attr("times")),s(),t.append(c[1]);break;case 4:d.title=["",!1],d.area=["auto","auto"],d.fix=!1,d.border=!1,o(".xubox_tips")[0]&&layer.close(o(".xubox_tips").parents("."+u.lay).attr("times")),s(),t.append(c[1]),o("#"+u.lay+h).find(".xubox_close").css({top:6,right:7});break;default:d.title[1]||(d.area=["auto","auto"]),o(".xubox_dialog")[0]&&layer.close(o(".xubox_dialog").parents("."+u.lay).attr("times")),s(),t.append(c[1])}if(this.layerS=o("#xubox_shade"+h),this.layerB=o("#xubox_border"+h),this.layerE=o("#"+u.lay+h),a=this.layerE,this.layerMian=a.find(".xubox_main"),this.layerTitle=a.find(".xubox_title"),this.layerText=a.find(".xubox_text"),this.layerPage=a.find(".xubox_page"),this.layerBtn=a.find(".xubox_botton"),r=-1!=d.offset[1].indexOf("px")?parseInt(d.offset[1]):"50%"==d.offset[1]?d.offset[1]:parseInt(d.offset[1])/100*i.width(),a.css({left:r+d.border[0],width:d.area[0],height:d.area[1]}),d.fix?a.css({top:parseInt(d.offset[0])+d.border[0]}):a.css({top:parseInt(d.offset[0])+i.scrollTop()+d.border[0],position:"absolute"}),d.title[1]&&(3!==d.type||4!==d.type))switch(n=0===d.type?f:d,n.btn=d.btn||f.btn,n.btns){case 0:l.layerBtn.html("").hide();break;case 1:l.layerBtn.html('<a href="javascript:;" class="xubox_yes xubox_botton1">'+n.btn[0]+"</a>");break;case 2:l.layerBtn.html('<a href="javascript:;" class="xubox_yes xubox_botton2">'+n.btn[0]+'</a><a href="javascript:;" class="xubox_no xubox_botton3">'+n.btn[1]+"</a>")}"auto"===a.css("left")?(a.hide(),setTimeout(function(){a.show(),l.set(h)},500)):l.set(h),d.time<=0||l.autoclose(),this.callback()},s.pt.set=function(e){var t,s,a,r,n,l,c=this,d=c.layerE,f=c.config,p=(f.dialog,f.page),u=(f.loading,c.dom);switch(c.autoArea(e),f.title[1]?layer.ie6&&c.layerTitle.css({width:d.outerWidth()}):4!=f.type&&d.find(".xubox_close").addClass("xubox_close1"),d.attr({type:c.type[f.type]}),f.type){case 1:d.find(p.dom).addClass("layer_pageContent"),f.shade[2]&&d.css({zIndex:f.zIndex+1}),f.title[1]&&c.layerPage.css({top:c.layerTitle.outerHeight()});break;case 2:t=d.find("."+u.ifr),s=d.height(),t.addClass("xubox_load").css({width:d.width()}),f.title[1]?t.css({top:c.layerTitle.height(),height:s-c.layerTitle.height()}):t.css({top:0,height:s}),layer.ie6&&t.attr("src",f.iframe.src);break;case 3:break;case 4:a=[0,d.outerHeight()],r=o(f.tips.follow),n={width:r.outerWidth(),height:r.outerHeight(),top:r.offset().top,left:r.offset().left},l=d.find(".layerTipsG"),f.tips.isGuide||l.remove(),d.outerWidth()>f.maxWidth&&d.width(f.maxWidth),n.tipColor=f.tips.style[1],a[0]=d.outerWidth(),n.where=[function(){n.tipLeft=n.left,n.tipTop=n.top-a[1]-10,l.removeClass("layerTipsB").addClass("layerTipsT").css({"border-right-color":n.tipColor})},function(){n.tipLeft=n.left+n.width+10,n.tipTop=n.top,l.removeClass("layerTipsL").addClass("layerTipsR").css({"border-bottom-color":n.tipColor})},function(){n.tipLeft=n.left,n.tipTop=n.top+n.height+10,l.removeClass("layerTipsT").addClass("layerTipsB").css({"border-right-color":n.tipColor})},function(){n.tipLeft=n.left-a[0]+10,n.tipTop=n.top,l.removeClass("layerTipsR").addClass("layerTipsL").css({"border-bottom-color":n.tipColor})}],n.where[f.tips.guide](),0===f.tips.guide?n.top-(i.scrollTop()+a[1]+16)<0&&n.where[2]():1===f.tips.guide?i.width()-(n.left+n.width+a[0]+16)>0||n.where[3]():2===f.tips.guide?n.top-i.scrollTop()+n.height+a[1]+16-i.height()>0&&n.where[0]():3===f.tips.guide&&a[0]+16-n.left>0&&n.where[1](),d.css({left:n.tipLeft,top:n.tipTop});break;default:c.layerMian.css({"background-color":"#fff"}),f.title[1]?c.layerText.css({paddingTop:18+c.layerTitle.outerHeight()}):(d.find(".xubox_msgico").css({top:8}),c.layerText.css({marginTop:11}))}f.fadeIn&&d.css({opacity:0}).animate({opacity:1},f.fadeIn),c.move()},s.pt.autoArea=function(){var e,t,i,s=this,a=s.layerE,r=s.config,n=r.page,l=s.layerMian,c=s.layerBtn,d=s.layerText,f=s.layerPage,p=s.layerB,u=0,h=o(".xubox_loading");switch("auto"===r.area[0]&&l.outerWidth()>=r.maxWidth&&a.css({width:r.maxWidth}),e=r.title[1]?s.layerTitle.innerHeight():0,r.type){case 0:i=c.find("a"),t=d.outerHeight()+20,i.length>0&&(u=i.outerHeight()+20);break;case 1:t=o(n.dom).outerHeight(),"auto"===r.area[0]&&a.css({width:f.outerWidth()}),(""!==n.html||""!==n.url)&&(t=f.outerHeight());break;case 3:t=h.outerHeight(),l.css({width:h.width()})}"auto"===r.area[1]&&l.css({height:e+t+u}),p.css({width:a.outerWidth()+2*r.border[0],height:a.outerHeight()+2*r.border[0]}),layer.ie6&&"auto"!=r.area[0]&&l.css({width:a.outerWidth()}),"50%"!==r.offset[1]&&""!=r.offset[1]||4===r.type?a.css({marginLeft:0}):a.css({marginLeft:-a.outerWidth()/2})},s.pt.move=function(){var e=this,t=this.config,s=e.dom,a={setY:0,moveLayer:function(){var e;e=0==parseInt(a.layerE.css("margin-left"))?parseInt(a.move.css("left")):parseInt(a.move.css("left"))+-parseInt(a.layerE.css("margin-left")),"fixed"!==a.layerE.css("position")&&(e-=a.layerE.parent().offset().left,a.setY=0),a.layerE.css({left:e,top:parseInt(a.move.css("top"))-a.setY})}};t.move[1]&&e.layerE.find(t.move[0]).attr("move","ok"),t.move[1]?e.layerE.find(t.move[0]).css({cursor:"move"}):e.layerE.find(t.move[0]).css({cursor:"auto"}),o(t.move[0]).on("mousedown",function(e){if(e.preventDefault(),"ok"===o(this).attr("move")){a.ismove=!0,a.layerE=o(this).parents("."+s.lay);var r=a.layerE.offset().left,n=a.layerE.offset().top,l=a.layerE.width()-6,c=a.layerE.height()-6;o("#xubox_moves")[0]||o("body").append('<div id="xubox_moves" class="xubox_moves" style="left:'+r+"px; top:"+n+"px; width:"+l+"px; height:"+c+'px; z-index:2147483584"></div>'),a.move=o("#xubox_moves"),t.moveType&&a.move.css({opacity:0}),a.moveX=e.pageX-a.move.position().left,a.moveY=e.pageY-a.move.position().top,"fixed"!==a.layerE.css("position")||(a.setY=i.scrollTop())}}),o(document).mousemove(function(e){var o,s,r,n;a.ismove&&(o=e.pageX-a.moveX,s=e.pageY-a.moveY,e.preventDefault(),t.moveOut||(a.setY=i.scrollTop(),r=i.width()-a.move.outerWidth()-t.border[0],n=t.border[0]+a.setY,o<t.border[0]&&(o=t.border[0]),o>r&&(o=r),n>s&&(s=n),s>i.height()-a.move.outerHeight()-t.border[0]+a.setY&&(s=i.height()-a.move.outerHeight()-t.border[0]+a.setY)),a.move.css({left:o,top:s}),t.moveType&&a.moveLayer(),o=null,s=null,r=null,n=null)}).mouseup(function(){try{a.ismove&&(a.moveLayer(),a.move.remove()),a.ismove=!1}catch(e){a.ismove=!1}t.moveEnd&&t.moveEnd()})},s.pt.autoclose=function(){var e=this,t=this.config.time,o=function(){t--,0===t&&(layer.close(e.index),clearInterval(e.autotime))};this.autotime=setInterval(o,1e3)},l.config={end:{}},s.pt.callback=function(){var e=this,t=e.layerE,o=e.config,i=o.dialog;e.openLayer(),e.config.success(t),layer.ie6&&e.IE6(),t.find(".xubox_close").off("click").on("click",function(t){t.preventDefault(),o.close(e.index)}),t.find(".xubox_yes").off("click").on("click",function(t){t.preventDefault(),o.yes?o.yes(e.index):i.yes(e.index)}),t.find(".xubox_no").off("click").on("click",function(t){t.preventDefault(),o.no?o.no(e.index):i.no(e.index)}),this.layerS.off("click").on("click",function(t){t.preventDefault(),e.config.shadeClose&&layer.close(e.index)}),l.config.end[e.index]=o.end},s.pt.IE6=function(){var e,t=this,s=t.layerE,a=o("select"),r=t.dom,n=s.offset().top;e=t.config.fix?function(){s.css({top:o(document).scrollTop()+n})}:function(){s.css({top:n})},e(),i.scroll(e),o.each(a,function(){var e=o(this);e.parents("."+r.lay)[0]||"none"==e.css("display")||e.attr({layer:"1"}).hide(),e=null}),t.reselect=function(){o.each(a,function(){var e=o(this);e.parents("."+r.lay)[0]||1==e.attr("layer")&&o("."+r.lay).length<1&&e.removeAttr("layer").show(),e=null})}},s.pt.openLayer=function(){var e=this,t=e.dom;layer.autoArea=function(t){return e.autoArea(t)},layer.getIndex=function(e){return o(e).parents("."+t.lay).attr("times")},layer.getChildFrame=function(e,i){return i=i||o("."+t.ifr).parents("."+t.lay).attr("times"),o("#"+t.lay+i).find("."+t.ifr).contents().find(e)},layer.getFrameIndex=function(e){return o(e?"#"+e:"."+t.ifr).parents("."+t.lay).attr("times")},layer.iframeAuto=function(e){var i,s,a,r,n;e=e||o("."+t.ifr).parents("."+t.lay).attr("times"),i=this.getChildFrame("body",e).outerHeight(),s=o("#"+t.lay+e),a=s.find(".xubox_title"),r=0,!a||(r=a.height()),s.css({height:i+r}),n=-parseInt(o("#xubox_border"+e).css("top")),o("#xubox_border"+e).css({height:i+2*n+r}),o("#"+t.ifr+e).css({height:i})},layer.close=function(i){var s,a=o("#"+t.lay+i),r=o("#xubox_moves, #xubox_shade"+i);if(a.attr("type")==e.type[1])if(a.find(".xuboxPageHtml")[0])a.remove();else for(a.find(".xubox_close,.xubox_botton,.xubox_title,.xubox_border").remove(),s=0;3>s;s++)a.find(".layer_pageContent").unwrap().hide();else document.all&&a.find("#"+t.ifr+i).remove(),a.remove();r.remove(),layer.ie6&&e.reselect(),"function"==typeof l.config.end[i]&&l.config.end[i](),delete l.config.end[i]},layer.loadClose=function(){var e=o(".xubox_loading").parents("."+t.lay),i=e.attr("times");layer.close(i)},layer.shift=function(t,o){var s,a=e.config,r=layer.ie6,n=e.layerE,l=0,c=i.width(),d=i.height();switch(l="50%"==a.offset[1]||""==a.offset[1]?n.outerWidth()/2:n.outerWidth(),s={t:{top:a.border[0]},b:{top:d-n.outerHeight()-a.border[0]},cl:l+a.border[0],ct:-n.outerHeight(),cr:c-l-a.border[0],fn:function(){r&&e.IE6()}},t){case"left-top":n.css({left:s.cl,top:s.ct}).animate(s.t,o,s.fn);break;case"top":n.css({top:s.ct}).animate(s.t,o,s.fn);break;case"right-top":n.css({left:s.cr,top:s.ct}).animate(s.t,o,s.fn);break;case"right-bottom":n.css({left:s.cr,top:d}).animate(s.b,o,s.fn);break;case"bottom":n.css({top:d}).animate(s.b,o,s.fn);break;case"left-bottom":n.css({left:s.cl,top:d}).animate(s.b,o,s.fn);break;case"left":n.css({left:-n.outerWidth(),marginLeft:0}).animate({left:s.t.top},o,s.fn)}},layer.setMove=function(){return e.move()},layer.area=function(i,s){var a,r=[o("#"+t.lay+i),o("#xubox_border"+i)],n=r[0].attr("type"),l=r[0].find(".xubox_main"),c=r[0].find(".xubox_title");(n===e.type[1]||n===e.type[2])&&(r[0].css(s),l.css({height:s.height}),n===e.type[2]&&(a=r[0].find("iframe"),a.css({width:s.width,height:c?s.height-c.outerHeight():s.height})),"0px"!==r[0].css("margin-left")&&(s.hasOwnProperty("top")&&r[0].css({top:s.top-(r[1][0]&&parseInt(r[1].css("top")))}),s.hasOwnProperty("left")&&r[0].css({left:s.left+r[0].outerWidth()/2-(r[1][0]&&parseInt(r[1].css("left")))}),r[0].css({marginLeft:-r[0].outerWidth()/2})),r[1][0]&&r[1].css({width:parseFloat(s.width)-2*parseInt(r[1].css("left")),height:parseFloat(s.height)-2*parseInt(r[1].css("top"))}))},layer.closeAll=function(){var e=o("."+t.lay);o.each(e,function(){var e=o(this).attr("times");layer.close(e)})},layer.closeTips=function(){var e=o(".xubox_tips");e[0]&&layer.close(e.parents(".xubox_layer").attr("times"))},layer.iframeSrc=function(e,i){o("#"+t.lay+e).find("iframe").attr("src",i)},layer.zIndex=e.config.zIndex,layer.setTop=function(e){var t=function(){layer.zIndex++,e.css("z-index",layer.zIndex+1)};return layer.zIndex=parseInt(e[0].style.zIndex),e.on("mousedown",t),layer.zIndex}},l.run=function(){o=jQuery,i=o(e),layer.use("skin/layer.css"),o.layer=function(e){var t=new s(e);return t.index}},a="../../init/jquery",e.seajs?define([a],function(t,o){l.run(),o.layer=[e.layer,e.$.layer]}):l.run()}(window);